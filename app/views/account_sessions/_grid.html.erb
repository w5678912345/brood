<%= grid(@account_sessions, upper_pagination_panel: true, show_filters: :yes) do |g|
  g.row_attributes do |version|
  end

  g.column name:  'ID', attribute: 'id'
  g.column name:  '电脑', attribute: 'computer_name' do |a|
    link_to a.computer_name,computer_path(a.computer)
  end
  g.column name:  '账号', attribute: 'account_id' do |a|
    link_to a.account_id,account_path(a.account)
  end
  g.column name:  '完成', attribute: 'finished'
  g.column name:  '当前角色',attribute: 'role_session_id' do |a|
    link_to a.role_session.role.name,role_session_path(a.role_session) if a.role_session
  end

  g.column name:  'IP',attribute: 'ip'


  g.column name:  '开始时间',attribute: 'created_at'
  g.column name:  '结束时间',attribute: 'finished_at'

  g.column name:  '开始状态',attribute: 'started_status' 
  g.column name:  '结束状态',attribute: 'finished_status' do |a|
    if a.finished
      [a.finished_status,html_style_for_account_status(a.finished_status)]
    else
      a.finished_status
    end
  end
  g.column do |a|
    link_to raw("<i class='icon-trash'></i>删除"),account_session_path(a),method: 'delete',confirm: 'Are you sure?'
  end
end %>
